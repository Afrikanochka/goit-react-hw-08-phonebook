(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{20:function(e,t,n){e.exports={form:"Signup_form__E-JKC",heading:"Signup_heading__2GUBY",label:"Signup_label__3NBRg",input:"Signup_input__jGK3I",button:"Signup_button__2CYs9"}},23:function(e,t,n){e.exports={form:"Login_form__3izM9",heading:"Login_heading__3PZwR",label:"Login_label__10UAZ",input:"Login_input__46dw2",button:"Login_button__2FgeX"}},24:function(e,t,n){e.exports={form:"InputForm_form__2N6iP",label:"InputForm_label__1r6XM",input:"InputForm_input__7JsVE",btn:"InputForm_btn__1GDgF"}},26:function(e,t,n){e.exports={container:"Navigation_container__qcWQ8",link:"Navigation_link__1v_4w",link_active:"Navigation_link_active__24VPq"}},27:function(e,t,n){e.exports={container:"LoginMenu_container__2EUcs",link:"LoginMenu_link__3HMl0",link_active:"LoginMenu_link_active__2hJ4o"}},29:function(e,t,n){e.exports={list:"Phonebook_list__MKWId",item:"Phonebook_item__3aI8x",close:"Phonebook_close__rWaVr"}},31:function(e,t,n){e.exports={container:"UserMenu_container__2zkYm",avatar:"UserMenu_avatar__njvnn",name:"UserMenu_name__1Hdrw",button:"UserMenu_button__3dpgf"}},37:function(e,t,n){e.exports={wrapper:"Filter_wrapper__1LS0T",label:"Filter_label__1EBlO",input:"Filter_input__2glLq"}},42:function(e,t,n){e.exports={section:"Container_section__3FOmD",title:"Container_title__1oqph"}},53:function(e,t,n){e.exports={appbar:"Appbar_appbar__nvnsO"}},54:function(e,t,n){e.exports={heading:"HomeView_heading__3VuNW"}},63:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var r,a,c,o,u,s,i=n(0),l=n.n(i),b=n(32),j=n.n(b),p=n(14),h=n(5),f=n(51),m=(n(62),n(63),n(35)),O=n(3),d=n(22),g=n(52),_=n.n(g),x=n(2),v=n(7),C=Object(O.b)("contacts/fetchContactsRequest"),k=Object(O.b)("contacts/fetchContactsSuccess"),N=Object(O.b)("contacts/fetchContactsError"),y=Object(O.b)("contacts/addContactRequest"),S=Object(O.b)("contacts/addContactSuccess"),w=Object(O.b)("contacts/addContactError"),E=Object(O.b)("contacts/deleteContactRequest"),U=Object(O.b)("contacts/deleteContactSuccess"),L=Object(O.b)("contacts/deleteContactError"),A=Object(O.b)("contacts/changeFilter"),R=Object(O.c)([],(r={},Object(x.a)(r,k,(function(e,t){return t.payload})),Object(x.a)(r,S,(function(e,t){var n=t.payload;return[].concat(Object(m.a)(e),[n])})),Object(x.a)(r,U,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),q=Object(O.c)(!1,(a={},Object(x.a)(a,C,(function(){return!0})),Object(x.a)(a,k,(function(){return!1})),Object(x.a)(a,N,(function(){return!1})),Object(x.a)(a,y,(function(){return!0})),Object(x.a)(a,S,(function(){return!1})),Object(x.a)(a,w,(function(){return!1})),Object(x.a)(a,E,(function(){return!0})),Object(x.a)(a,U,(function(){return!1})),Object(x.a)(a,L,(function(){return!1})),a)),F=Object(O.c)("",Object(x.a)({},A,(function(e,t){return t.payload}))),M=Object(O.c)(null,{}),P=Object(v.b)({contacts:R,filter:F,loading:q,error:M}),T={registerRequest:Object(O.b)("auth/registerRequest"),registerSuccess:Object(O.b)("auth/registerSuccess"),registerError:Object(O.b)("auth/registerError"),loginRequest:Object(O.b)("auth/loginRequest"),loginSuccess:Object(O.b)("auth/loginSuccess"),loginError:Object(O.b)("auth/loginError"),logoutRequest:Object(O.b)("auth/logoutRequest"),logoutSuccess:Object(O.b)("auth/logoutSuccess"),logoutError:Object(O.b)("auth/logoutError"),getCurrentUserRequest:Object(O.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(O.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(O.b)("auth/getCurrentUserError")},D={name:null,email:null},I=Object(O.c)(D,(c={},Object(x.a)(c,T.registerSuccess,(function(e,t){return t.payload.user})),Object(x.a)(c,T.loginSuccess,(function(e,t){return t.payload.user})),Object(x.a)(c,T.logoutSuccess,(function(){return D})),Object(x.a)(c,T.getCurrentUserSuccess,(function(e,t){return t.payload})),c)),z=Object(O.c)(null,(o={},Object(x.a)(o,T.registerSuccess,(function(e,t){return t.payload.token})),Object(x.a)(o,T.loginSuccess,(function(e,t){return t.payload.token})),Object(x.a)(o,T.logoutSuccess,(function(){return null})),o)),B=Object(O.c)(null,(u={},Object(x.a)(u,T.registerError,(function(e,t){return t.payload})),Object(x.a)(u,T.loginError,(function(e,t){return t.payload})),Object(x.a)(u,T.logoutError,(function(e,t){return t.payload})),Object(x.a)(u,T.getCurrentUserError,(function(e,t){return t.payload})),u)),G=Object(O.c)(!1,(s={},Object(x.a)(s,T.registerSuccess,(function(){return!0})),Object(x.a)(s,T.loginSuccess,(function(){return!0})),Object(x.a)(s,T.getCurrentUserSuccess,(function(){return!0})),Object(x.a)(s,T.registerError,(function(){return!1})),Object(x.a)(s,T.loginError,(function(){return!1})),Object(x.a)(s,T.getCurrentUserError,(function(){return!1})),Object(x.a)(s,T.logoutSuccess,(function(){return!1})),s)),J=Object(v.b)({user:I,token:z,isAuthenticated:G,error:B}),V=Object(m.a)(Object(O.d)({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})),W={key:"auth",storage:_.a,whitelist:["token"]},H=Object(O.a)({reducer:{auth:Object(d.g)(W,J),contacts:P},middleware:V,devTools:!1}),Y={store:H,persistor:Object(d.h)(H)},K=n(15),X=n(16),Z=n(18),Q=n(17),$=n(6),ee=n(26),te=n.n(ee),ne=n(1),re=function(){return Object(ne.jsxs)("div",{className:te.a.container,children:[Object(ne.jsx)(p.b,{className:te.a.link,activeClassName:te.a.link_active,exact:!0,to:"/",children:"Home"}),Object(ne.jsx)(p.b,{className:te.a.link,activeClassName:te.a.link_active,to:"/phonebook",children:"Phonebook"})]})},ae=n(27),ce=n.n(ae),oe=function(){return Object(ne.jsxs)("div",{className:ce.a.container,children:[Object(ne.jsx)(p.b,{className:ce.a.link,activeClassName:ce.a.link_active,to:"/signup",children:"Sign up"}),Object(ne.jsx)(p.b,{className:ce.a.link,activeClassName:ce.a.link_active,to:"/login",children:"Login"})]})},ue=function(e){return e.auth.isAuthenticated},se=function(e){return e.auth.user.name},ie=n(21),le=n.n(ie),be=n(30),je=n(12),pe=n.n(je);pe.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var he=function(e){pe.a.defaults.headers.common.Authorization="Bearer ".concat(e)},fe=function(){pe.a.defaults.headers.common.Authorization=""},me={register:function(e){return function(){var t=Object(be.a)(le.a.mark((function t(n){var r;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(T.registerRequest()),t.prev=1,t.next=4,pe.a.post("/users/signup",e);case 4:r=t.sent,he(r.data.token),n(T.registerSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(T.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},login:function(e){return function(){var t=Object(be.a)(le.a.mark((function t(n){var r;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(T.loginRequest()),t.prev=1,t.next=4,pe.a.post("/users/login",e);case 4:r=t.sent,he(r.data.token),n(T.loginSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(T.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(be.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(T.logoutRequest()),e.prev=1,e.next=4,pe.a.post("users/logout");case 4:fe(),t(T.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(T.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(be.a)(le.a.mark((function e(t,n){var r,a,c;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.auth.token){e.next=3;break}return e.abrupt("return");case 3:return he(a),t(T.getCurrentUserRequest()),e.prev=5,e.next=8,pe.a.get("users/current");case 8:c=e.sent,t(T.getCurrentUserSuccess(c.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(T.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}},Oe=n(31),de=n.n(Oe),ge=Object(h.b)((function(e){return{userName:se(e)}}),(function(e){return{onLogout:function(){return e(me.logout())}}}))((function(e){var t=e.userName,n=e.onLogout;return Object(ne.jsxs)("div",{className:de.a.container,children:[Object(ne.jsx)("span",{className:de.a.avatar,children:t.slice(0,1)}),Object(ne.jsx)("span",{className:de.a.name,children:t}),Object(ne.jsx)("button",{className:de.a.button,type:"button",onClick:n,children:"Log Out"})]})})),_e=n(53),xe=n.n(_e),ve=Object(h.b)((function(e){return{isAuthenticated:ue(e)}}))((function(e){var t=e.isAuthenticated;return Object(ne.jsxs)("div",{className:xe.a.appbar,children:[Object(ne.jsx)(re,{}),t?Object(ne.jsx)(ge,{}):Object(ne.jsx)(oe,{})]})})),Ce=n(23),ke=n.n(Ce),Ne=function(e){Object(Z.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(K.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={email:"",password:""},e.onChange=function(t){var n=t.currentTarget,r=n.name,a=n.value;e.setState(Object(x.a)({},r,a))},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state)},e}return Object(X.a)(n,[{key:"render",value:function(){return Object(ne.jsxs)("form",{className:ke.a.form,onSubmit:this.handleSubmit,children:[Object(ne.jsx)("h2",{className:ke.a.heading,children:"Log in"}),Object(ne.jsxs)("label",{className:ke.a.label,children:["Email",Object(ne.jsx)("input",{className:ke.a.input,type:"email",name:"email",autoComplete:"off",placeholder:"Enter your e-mail",onChange:this.onChange})]}),Object(ne.jsxs)("label",{className:ke.a.label,children:["Password",Object(ne.jsx)("input",{className:ke.a.input,type:"password",name:"password",autoComplete:"off",placeholder:"Enter your password",onChange:this.onChange})]}),Object(ne.jsx)("button",{type:"submit",className:ke.a.button,children:"Sign in"})]})}}]),n}(i.Component),ye=Object(h.b)(null,(function(e){return{onSubmit:function(t){return e(me.login(t))}}}))(Ne),Se=n(54),we=n.n(Se),Ee=function(){return Object(ne.jsx)("h1",{className:we.a.heading,children:"Welcome! Your Phonebook is ready to go!"})},Ue=n(20),Le=n.n(Ue),Ae=function(e){Object(Z.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(K.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={name:"",email:"",password:""},e.onChange=function(t){var n=t.currentTarget,r=n.name,a=n.value;e.setState(Object(x.a)({},r,a))},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state)},e}return Object(X.a)(n,[{key:"render",value:function(){return Object(ne.jsxs)("form",{className:Le.a.form,onSubmit:this.handleSubmit,children:[Object(ne.jsx)("h2",{className:Le.a.heading,children:"Sign up"}),Object(ne.jsxs)("label",{className:Le.a.label,children:["Name",Object(ne.jsx)("input",{className:Le.a.input,type:"text",name:"name",autoComplete:"off",placeholder:"Enter your name",onChange:this.onChange})]}),Object(ne.jsxs)("label",{className:Le.a.label,children:["Email",Object(ne.jsx)("input",{className:Le.a.input,type:"email",name:"email",autoComplete:"off",placeholder:"Enter your e-mail",onChange:this.onChange})]}),Object(ne.jsxs)("label",{className:Le.a.label,children:["Password",Object(ne.jsx)("input",{className:Le.a.input,type:"password",name:"password",autoComplete:"off",placeholder:"Enter your password",onChange:this.onChange})]}),Object(ne.jsx)("button",{type:"submit",className:Le.a.button,children:"Register"})]})}}]),n}(i.Component),Re=Object(h.b)(null,(function(e){return{onSubmit:function(t){return e(me.register(t))}}}))(Ae),qe=n(34),Fe=function(e){return e.contacts.loading},Me=function(e){return e.contacts.contacts},Pe=function(e){return e.contacts.filter},Te=Object(qe.a)([Me,Pe],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))}));pe.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var De=n(24),Ie=n.n(De),ze=function(e){Object(Z.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(K.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={name:"",number:""},e.handleChange=function(t){var n=t.currentTarget,r=n.name,a=n.value;e.setState(Object(x.a)({},r,a))},e.handleSubmit=function(t){t.preventDefault();var n=e.state.name,r=e.props,a=r.contacts,c=r.onSubmit;if(a.find((function(e){return e.name.toLowerCase()===n.toLowerCase()})))return alert("".concat(n," Already exists")),void e.reset();c(e.state),e.reset()},e.reset=function(){e.setState({name:"",number:""})},e}return Object(X.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.number;return Object(ne.jsxs)("form",{className:Ie.a.form,onSubmit:this.handleSubmit,children:[Object(ne.jsx)("label",{className:Ie.a.label,htmlFor:"name",children:"Name"}),Object(ne.jsx)("input",{id:"name",type:"text",onChange:this.handleChange,className:Ie.a.input,name:"name",value:t,placeholder:"Name",autoComplete:"off",autoFocus:!0}),Object(ne.jsx)("label",{className:Ie.a.label,htmlFor:"number",children:"Number"}),Object(ne.jsx)("input",{id:"number",type:"text",onChange:this.handleChange,className:Ie.a.input,name:"number",value:n,placeholder:"Phone number",autoComplete:"off"}),Object(ne.jsx)("button",{type:"submit",className:Ie.a.btn,children:"Add contact"})]})}}]),n}(i.Component),Be=Object(h.b)((function(e){return{contacts:Me(e)}}),(function(e){return{onSubmit:function(t){var n=t.name,r=t.number;return e(function(e){var t=e.name,n=e.number;return function(e){var r={name:t,number:n};e(y()),pe.a.post("/contacts",r).then((function(t){var n=t.data;return e(S(n))})).catch((function(t){return e(w(t.message))}))}}({name:n,number:r}))}}}))(ze),Ge=n(37),Je=n.n(Ge),Ve=function(e){var t=e.filter,n=e.onChange;return Object(ne.jsx)("div",{className:Je.a.wrapper,children:Object(ne.jsxs)("label",{className:Je.a.label,children:["Find by Name",Object(ne.jsx)("input",{className:Je.a.input,type:"text",value:t,onChange:n})]})})};Ve.defaultProps={filter:""};var We=Object(h.b)((function(e){return{filter:Pe(e)}}),(function(e){return{onChange:function(t){return e(A(t.target.value))}}}))(Ve),He=n(19),Ye=n(29),Ke=n.n(Ye),Xe=Object(h.b)(null,(function(e){return{onDelete:function(t){return e((n=t,function(e){e(E()),pe.a.delete("/contacts/".concat(n)).then((function(){return e(U(n))})).catch((function(t){return e(L(t.message))}))}));var n}}}))((function(e){var t=e.name,n=e.number,r=e.id,a=e.onDelete;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("span",{children:[t," : ",n]}),Object(ne.jsx)("button",{type:"button",className:Ke.a.close,onClick:function(){return a(r)},children:"+"})]})})),Ze=Object(h.b)((function(e){return{contacts:Te(e)}}))((function(e){var t=e.contacts;return Object(ne.jsx)(ne.Fragment,{children:t&&Object(ne.jsx)("ul",{className:Ke.a.list,children:t.map((function(e){return Object(ne.jsx)("li",{className:Ke.a.item,children:Object(ne.jsx)(Xe,Object(He.a)({},e))},e.id)}))})})})),Qe=n(42),$e=n.n(Qe),et=function(e){var t=e.title,n=e.children;return Object(ne.jsxs)("section",{className:$e.a.section,children:[Object(ne.jsx)("h2",{className:$e.a.title,children:t}),n]})};et.defaultProps={title:""};var tt=et,nt=function(e){Object(Z.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(K.a)(this,n),t.apply(this,arguments)}return Object(X.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchContacts()}},{key:"render",value:function(){return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(tt,{title:"Phonebook",children:Object(ne.jsx)(Be,{})}),Object(ne.jsxs)(tt,{title:"Contacts",children:[Object(ne.jsx)(We,{}),this.props.isLoadingContacts&&Object(ne.jsx)("h2",{children:" Loading contacts..."}),Object(ne.jsx)(Ze,{})]})]})}}]),n}(i.Component),rt=Object(h.b)((function(e){return{isLoadingContacts:Fe(e)}}),(function(e){return{fetchContacts:function(){return e((function(e){e(C()),pe.a.get("/contacts").then((function(t){var n=t.data;return e(k(n))})).catch((function(t){return e(N(t.message))}))}))}}}))(nt),at=n(36),ct=["component","isAuthenticated","redirectTo"],ot=Object(h.b)((function(e){return{isAuthenticated:ue(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=e.redirectTo,a=Object(at.a)(e,ct);return Object(ne.jsx)($.b,Object(He.a)(Object(He.a)({},a),{},{render:function(e){return n&&a.restricted?Object(ne.jsx)($.a,{to:r}):Object(ne.jsx)(t,Object(He.a)({},e))}}))})),ut=["component","isAuthenticated","redirectTo"],st=Object(h.b)((function(e){return{isAuthenticated:ue(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=e.redirectTo,a=Object(at.a)(e,ut);return Object(ne.jsx)($.b,Object(He.a)(Object(He.a)({},a),{},{render:function(e){return n?Object(ne.jsx)(t,Object(He.a)({},e)):Object(ne.jsx)($.a,{to:r})}}))})),it=function(e){Object(Z.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(K.a)(this,n),t.apply(this,arguments)}return Object(X.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(ve,{}),Object(ne.jsxs)($.d,{children:[Object(ne.jsx)(ot,{exact:!0,path:"/",component:Ee}),Object(ne.jsx)(ot,{path:"/signup",restricted:!0,redirectTo:"/phonebook",component:Re}),Object(ne.jsx)(ot,{path:"/login",restricted:!0,redirectTo:"/phonebook",component:ye}),Object(ne.jsx)(st,{path:"/phonebook",redirectTo:"/login",component:rt})]})]})}}]),n}(i.Component),lt={onGetCurrentUser:me.getCurrentUser},bt=Object(h.b)(null,lt)(it);j.a.render(Object(ne.jsx)(l.a.StrictMode,{children:Object(ne.jsx)(h.a,{store:Y.store,children:Object(ne.jsx)(f.a,{loading:null,persistor:Y.persistor,children:Object(ne.jsx)(p.a,{children:Object(ne.jsx)(bt,{})})})})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.87a5c0b9.chunk.js.map